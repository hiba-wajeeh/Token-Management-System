<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Serving Now</title>

<style>
  :root{
    --pak-green: #065f46;
    --pak-green-dark: #064e3b;
    --accent: #16a34a;
    --card-bg: #f0fdf4;
  }

  body {
    margin: 0;
    background: #ffffff;
    color: var(--pak-green-dark);
    font-family: "Segoe UI", Arial;
  }

  .container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;

    /* Works on TVs: avoid too much top padding */
    padding: 28px 40px 40px;
    gap: 22px;
    box-sizing: border-box;
  }

  /* Top bar */
  .top {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 22px;
    margin-top: 4px;
  }

  .logo {
    height: clamp(70px, 8vh, 120px);
    object-fit: contain;
  }

  .title {
    font-size: clamp(42px, 5vw, 72px);
    font-weight: 1000;
    letter-spacing: 4px;
    color: var(--pak-green);
    line-height: 1;
    text-align: center;
    white-space: nowrap;
  }

  /* 4-cards grid: 1x4 on wide screens, 2x2 on normal screens */
  .grid {
    width: 100%;
    max-width: 1800px;

    display: grid;
    grid-template-columns: 1fr 1fr; /* ALWAYS 2 columns */
    grid-template-rows: 1fr 1fr;    /* ALWAYS 2 rows */
    gap: 32px;

    margin-top: 18px;
  }


  .card {
    background: var(--card-bg);
    border-radius: 28px;
    padding: 28px;
    border: 4px solid var(--accent);
    box-shadow: 0 18px 35px rgba(0,0,0,0.12);
    text-align: center;

    /* Make them tall enough for TV readability */
    min-height: clamp(240px, 28vh, 340px);

    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .counter {
    font-size: clamp(28px, 2.2vw, 40px);
    font-weight: 900;
    color: var(--pak-green);
  }

  .token {
    margin-top: 16px;
    font-size: clamp(84px, 6.5vw, 150px);
    font-weight: 1000;
    letter-spacing: 6px;
    color: #14532d;
    line-height: 1.05;
  }

  .urdu {
    margin-top: 10px;
    font-size: clamp(18px, 1.4vw, 26px);
    opacity: 0.9;
    color: #166534;
    font-weight: 700;
  }

  /* If screen is very short (some TVs), reduce spacing a bit */
  @media (max-height: 700px) {
    .container { padding-top: 18px; gap: 14px; }
    .grid { gap: 18px; }
    .card { padding: 22px; }
  }
</style>
</head>

<body>
  <div class="container">
    <div class="top">
      <!-- Logo (one directory behind) -->
      <img src="../static/logo.png" alt="Logo" class="logo" />
      <div class="title">SERVING NOW</div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="counter">Counter 1</div>
        <div class="token" id="c1">—</div>
        <div class="urdu">کاؤنٹر 1</div>
      </div>

      <div class="card">
        <div class="counter">Counter 2</div>
        <div class="token" id="c2">—</div>
        <div class="urdu">کاؤنٹر 2</div>
      </div>

      <div class="card">
        <div class="counter">Counter 3</div>
        <div class="token" id="c3">—</div>
        <div class="urdu">کاؤنٹر 3</div>
      </div>

      <div class="card">
        <div class="counter">Counter 4</div>
        <div class="token" id="c4">—</div>
        <div class="urdu">کاؤنٹر 4</div>
      </div>
    </div>
  </div>

<script>
async function refresh() {
  try {
    const res = await fetch("/api/status?dept=welfare", { cache: "no-store" });
    const data = await res.json();

    document.getElementById("c1").innerText = data?.serving?.Counter1 ?? "—";
    document.getElementById("c2").innerText = data?.serving?.Counter2 ?? "—";
    document.getElementById("c3").innerText = data?.serving?.Counter3 ?? "—";
    document.getElementById("c4").innerText = data?.serving?.Counter4 ?? "—";
  } catch (e) {
    console.error(e);
  }
}

refresh();
setInterval(refresh, 1000);
</script>
</body>
</html>
